CREATE TABLE pesquisa (
    id SERIAL PRIMARY KEY,
    nome varchar(50),
    data date);

CREATE TABLE estabelecimento (
    id SERIAL PRIMARY KEY,
    nome varchar(50),
    razao varchar(50),
    cnpj varchar(50),
    telefone varchar(50),
    estado varchar(50),
    municipio varchar(50),
    logradouro varchar(50),
    bairro varchar(50),
    numero integer,
    complemento varchar(50),
    cep varchar(50),
    responsavel varchar(50),
    email varchar(50));

CREATE TABLE item (
    id SERIAL PRIMARY KEY,
    nome varchar(50),
    quantidade integer);

CREATE TABLE relacao (
    id SERIAL PRIMARY KEY,
    preco double precision,
    pesquisa_id int NOT NULL,
    estabelecimento_id int NOT NULL,
    item_id int NOT NULL);

CREATE TABLE pesquisa_item (
    id SERIAL PRIMARY KEY,
    pesquisa_id int NOT NULL,
    item_id int NOT NULL);

    ALTER TABLE relacao ADD CONSTRAINT relacao_pesquisa_id_fk FOREIGN KEY (pesquisa_id) REFERENCES pesquisa (id);
    ALTER TABLE relacao ADD CONSTRAINT relacao_estabelecimento_id_fk FOREIGN KEY (estabelecimento_id) REFERENCES estabelecimento (id);
    ALTER TABLE relacao ADD CONSTRAINT relacao_item_id_fk FOREIGN KEY (item_id) REFERENCES item (id);
    ALTER TABLE pesquisa_item ADD CONSTRAINT pesquisa_item_pesquisa_id_fk FOREIGN KEY (pesquisa_id) REFERENCES pesquisa (id);
    ALTER TABLE pesquisa_item ADD CONSTRAINT pesquisa_item_item_id_fk FOREIGN KEY (item_id) REFERENCES item (id);